---
categories: [SWACADEMY]
---

# Cloud05

## 강의 내용

## 워크샵 시작 전 준비사항

### MFA 설정

- root 계정은 쓰지 않는다.
- 2차 인증을 반드시 설정한다.

## 네트워크 구성하기

### VPC 구성

![img.png](img.png)

- VPC간 통신은 Peering을 이용함.

#### CIDR 주소 범위 이해하기

![img_4.png](img_4.png)

- 중요함! 나중에 공부할 것!

#### 구성도

![img_5.png](img_5.png)

### 방화벽 설정

![img_1.png](img_1.png)

- NACL은 네트워크 방화벽 구성
- ACG은 소프트웨어 방식(Linux)으로 방화벽 구성

### 서브넷 생성

![img_2.png](img_2.png)

- public subnet과 private subnet을 나눈다.
- **VPC당 최대 200개의 서브넷 생성 가능**

### NAT Gateway

![img_3.png](img_3.png)

- private subnet에 있는 서버가 public subnet에 있는 서버와 통신을 할 때 NAT Gateway이다.

## 웹 서버 생성하기

![img_6.png](img_6.png)

![img_7.png](img_7.png)

- 서버를 재부팅하면 마운팅이 해제된다.
- 마운트를 설정할 수 있다.
- 볼륨은 10GB에서 2TB까지 생성할 수 있다.
- 이번에 실습한 스토리지는 블록 스토리지다.

```shell
# 스토리지 확인
fdisk -l
# 스토리지 볼륨화
fdisk /dev/xvdb
n
기본 설정
w
# 스토리지 확인
fdisk -l
# 볼륨 포맷
mkfs.ext4 /dev/xvdb1
# 마운트
mount /dev/xvdb1 /data
```

![img_9.png](img_9.png)

## 로드밸런서 구성하기

![img_12.png](img_12.png)

![img_10.png](img_10.png)

![img_8.png](img_8.png)

- https를 서비스할 수 있는 로드밸런서는 Application Load Balancer(L7 스위치)이다.

![img_11.png](img_11.png)

- 시험문제
  - 각 카테고리마다 어떠한 서비스가 있는지 알면 좋음.
- Health Check : group내의 서버들이 살았는지 죽었는지 확인
- target group을 우선적으로 생성해준다.
- load balancer를 만들면 5~10개의 IP가 생성된다.
- dns로 접근한다.
- 오토 스케일링할 때는 lb가 무조건 따라간다.

## 오토 스케일링

![img_13.png](img_13.png)

- 가장 먼저 launch configuration을 해준다.
- init script를 설정해놨는데 또 설정하는 이유는 업데이트된 환경 설정을 변경할 때 쓴다.
- 보통 오토 스케일링할 때는 잘 쓰지 않는다.
- 최소 용량은 무조건 유지되어야 하는 서버들의 개수
- 일정 설정 : 특정 일정에만 적용할 수 있는 기능
- 정책 설정 : 몇 대씩 대여하고 반납할지를 정하는 기능
- Management - Cloud Insight - configuration - event rule 에서 언제 증감할지 정해준다.

![img_14.png](img_14.png)

![img_15.png](img_15.png)

![img_17.png](img_17.png)
